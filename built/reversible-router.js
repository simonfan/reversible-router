//     reversible-rout
//     (c) simonfan
//     reversible-rout is licensed under the MIT terms.

define("reversible-router",["require","exports","module","lodash","lowercase-backbone"],function(r,e,t){function n(r){return r.replace(/(\(|\(.*:|:|\)|\*)/g,"")}function i(r,e){return r=r.replace(u,function(r){var t=n(r);return e[t]?e[t]:""}),r=r.replace(c,function(r){var t=n(r);return e[t]?e[t]:r}),r=r.replace(s,function(r){var t=n(r);return e[t]?e[t]:""}),r.replace(u,"")}{var o=r("lodash"),a=r("lowercase-backbone").router,u=/\((.*?)\)/g,c=/(\(\?)?:\w+/g,s=/\*\w+/g;t.exports=a.extend({initialize:function(){this.initializeArchRouter.apply(this,arguments)},initializeArchRouter:function(){this.routeFormats={}},route:function(r,e){return o.isString(e)&&(this.routeFormats[e]=r),a.prototype.route.apply(this,arguments)},navigate:function(r,e,t){var n=this.routeFormats[r];if(n){var o=i(n,e);return a.prototype.navigate.call(this,o,t)}return a.prototype.navigate.apply(this,arguments)}})}});